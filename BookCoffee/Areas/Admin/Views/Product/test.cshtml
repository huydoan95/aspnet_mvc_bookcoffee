@model Models.EF.Product

@{
    ViewBag.Title = "test";
    Layout = "~/Areas/Admin/Views/Shared/_Layouts.cshtml";
}

@section header{}
@section scriptNest{
    <script type="text/javascript">
        $(document).ready(function () {
            $("#GetImage").click(function (e) {
                e.preventDefault();
                var finder = new CKFinder();
               
                finder.selectActionFunction = function (url) {
                    $('#txtImage').val(url);
                }
                finder.popup();
            });
        });


        function openKCFinder(textarea) {
            window.KCFinder = {
                callBackMultiple: function (files) {
                    window.KCFinder = null;
                    textarea.value = "";
                    for (var i = 0; i < files.length; i++)
                        textarea.value += files[i] + "\n";
                }
            };
            window.open('/Assets/Admin/kcfinder/browse.php?type=files&dir=files/public',
                'kcfinder_multiple', 'status=0, toolbar=0, location=0, menubar=0, ' +
                'directories=0, resizable=1, scrollbars=0, width=800, height=600'
            );
        }


    </script>
}




@using (Html.BeginForm("test", "Product", FormMethod.Post))
{
    @Html.AntiForgeryToken()
    <div class="form-horizontal">
        <h4>Product</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.Name, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Name, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.MoreImage, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-6">
                @Html.ValidationMessageFor(model => model.MoreImage, "", new { @class = "text-danger" })
                @Html.TextBoxFor(x => x.MoreImage, new { type = "file", multiple = "true", @id = "txtImage" })
                @*@Html.TextAreaFor(model => model.MoreImage, new { @class = "form-control", @id = "txtImage", type = "file",multiple = "true" })*@
            </div>
            <a href="#" id="GetImage">Chọn hình</a>
        </div>

       

        <textarea id="files" readonly="readonly" onclick="openKCFinder(this)">
            Click here and choose multiple files with the Ctrl/Command key.
            Then right click on one of them and choose "Select"
        </textarea>



        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Create" class="btn btn-default" />
            </div>
        </div>
    </div>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>
